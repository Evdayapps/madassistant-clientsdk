# MADAssistant Client SDK
Mobile Android Debugging Assistant.
This is the SDK for integration in client applications.


## What is MADAssistant?
- An on-device solution for logging a variety of information from client apps.</br>
- Aids in the debugging and auditing of client apps, by providing a repository and viewer for logs generated by the apps, on the device itself.</br>
- Achieves this by pairing with the MADAssistant app</br>https://play.google.com/store/apps/details?id=com.evdayapps.madassistant.repository</br> which serves as the repository, and viewer, for the logs.</br>
- By providing a means to store and view these logs, it aims to provide diagnostic information to debug any issues that arise in a client app.</br>

### Companion App Screenshots
<img width="240" alt="portfolio_view" src="https://github.com/shannon-rodricks/madassistant-clientsdk/blob/main/doc/home.png"> <img width="240" alt="portfolio_view" src="https://github.com/shannon-rodricks/madassistant-clientsdk/blob/main/doc/device_info.png"> <img width="240" alt="portfolio_view" src="https://github.com/shannon-rodricks/madassistant-clientsdk/blob/main/doc/session_list.png"> <img width="240" alt="portfolio_view" src="https://github.com/shannon-rodricks/madassistant-clientsdk/blob/main/doc/package_info.png"> <img width="240" alt="portfolio_view" src="https://github.com/shannon-rodricks/madassistant-clientsdk/blob/main/doc/log_list.png"> <img width="240" alt="portfolio_view" src="https://github.com/shannon-rodricks/madassistant-clientsdk/blob/main/doc/logdetails_network.png"> <img width="240" alt="portfolio_view" src="https://github.com/shannon-rodricks/madassistant-clientsdk/blob/main/doc/logdetails_crash.png">

## Features
### Logging
The library currently provides logging for the following types of events:
- Network Logs
- Analytics Calls
- Exceptions and Crashes
- Generics Logs

## Why use it?
### Product Owners
- Logging of analytics events and network calls aid in audit and debugging of issues
### Testers
- Logging of network calls, anayltics events, exceptions and crashes while testing aids in raising more detailed bug reports
### Developers
- Enable developers to retrieve logs for a particular issue without having to replicate the issue on their end, which might be impossible in some cases.
### End Users
- This library may even be integrated into production builds, to enable debugging of hard-to-reproduce issues happening on a client's device.


## Security
An auth-token based system that controls what logs the user may view based on:
- The user's installation identifier (a uuid generated by the MADAssistant app once per installation)
- An optional start and end time
- The logs accessible to the user (with fine-grained regex-based filters)</br>
This information is encrypted using a passphrase which needs to provided to this library on runtime, to decrypt.</br>
All filtering is performed within the client library and then sent to the MADAssistant app

<img width="240" alt="portfolio_view" src="https://github.com/shannon-rodricks/madassistant-clientsdk/blob/main/doc/authtoken_generator.png"></br>

NOTE: These logs are not uploaded to any server and will remain only on the user's device until they share it.


## Integration into your application
- Add the jitpack repository to project build.gradle
  ```
  allprojects {
	repositories {
		...
		maven { url 'https://jitpack.io' }
	}
  }
  ```
- Add the library as a dependency
  ```
  implementation 'com.github.shannon-rodricks:madassistant-clientsdk:madassistant-client:0.0.12'
  // This is required to utilise an OkHttp Interceptor that will log network calls
  implementation 'com.github.shannon-rodricks:madassistant-clientsdk:madassistant-client-adapter-okhttp3:0.0.12'
  ```
- Create an instance of MADAssistantClient
  ```
  val client = MADAssistantClientImpl(
    applicationContext = context,
    passphrase = "<your passphrase here. This is used to authenticate the user. This is not shared with the repository and is used only within the sdk>",
    // Optional logging system
    logUtils = object : object : LogUtils {
            override fun i(tag: String, message: String) {
                Log.i(tag, message)
            }

            override fun v(tag: String, message: String) {
                Log.v(tag, message)
            }

            override fun d(tag: String, message: String) {
                Log.d(tag, message)
            }

            override fun e(throwable: Throwable) {
                throwable.printStackTrace()
            }
        }
  )
  ```
- Initialise the client
  ```
  client.connect()
  ```
- Log events using the appropriate method
  ```
  // For Exceptions
  fun logException(throwable: Throwable)
  
  // For Analytics
  fun logAnalyticsEvent(destination: String, eventName: String, data: Map<String, Any?>)
  
  // For logs that match android.util.Log
  fun logGenericLog(type: Int, tag: String, message: String, data: Map<String, Any?>?)

  // For network logs. 
  fun logNetworkCall(data: NetworkCallLogModel)
  Or use MADAssistantOkHttp3Interceptor as an interceptor in OkHttp3 setups
  ```
- Logging Crashes
  ```
  client.logCrashes()
  ```
  Alternately, crashes can be logged manually too using:
  ```
  client.logCrashReport(throwable: Throwable)
  ```
 










