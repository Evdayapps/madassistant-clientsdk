# MADAssistant-Library
Mobile Android Debugging Assistant.
This is the library for integration in client applications.


## What is it
- An on-device solution for logging a variety of types of information from client apps.</br>
- Its main purpose is to aid in the debugging and auditing of client apps, by providing a repository and viewer for logs generated by the apps, on the device itself.</br>
- It achieves this by pairing with the MADAssistant app</br>https://play.google.com/store/apps/details?id=com.evdayapps.madassistant.repository</br> which serves as the repository, and viewer, for the logs.</br>
- By providing a means to store and view these logs, it aims to provide diagnostic information to debug any issues that arise in a client app.</br>

### Companion App Screenshots
<img width="150" alt="portfolio_view" src="https://user-images.githubusercontent.com/3502209/123690291-d61c1200-d871-11eb-8b5f-98b8e19cb0b3.png"> <img width="150" alt="portfolio_view" src="https://user-images.githubusercontent.com/3502209/123690296-d7e5d580-d871-11eb-847c-cb4920aca976.png"> <img width="150" alt="portfolio_view" src="https://user-images.githubusercontent.com/3502209/123690302-d9170280-d871-11eb-8a6e-c8ce1c766478.png"> <img width="150" alt="portfolio_view" src="https://user-images.githubusercontent.com/3502209/123690309-da482f80-d871-11eb-923e-eea441e91615.png"> <img width="150" alt="portfolio_view" src="https://user-images.githubusercontent.com/3502209/123690315-dae0c600-d871-11eb-85b9-4d2271b14682.png"> <img width="150" alt="portfolio_view" src="https://user-images.githubusercontent.com/3502209/123690320-db795c80-d871-11eb-97c1-14d01275fdb6.png">

## Features
### Logging
The library currently provides logging for the following types of events:
- Network Logs
- Analytics Calls
- Exceptions and Crashes
- Generics Logs

### Shared Preferences Viewer
- TODO

## Why use it?
### Product Owners
- Logging of analytics events and network calls aid in audit and debugging of issues
### Testers
- Logging of network calls, anayltics events, exceptions and crashes while testing aids in raising more detailed bug reports
### Developers
- Enable developers to retrieve logs for a particular issue without having to replicate the issue on their end, which might be impossible in some cases.
### End Users
- This library may even be integrated into production builds, to enable debugging of hard-to-reproduce issues happening on a client's device


## Security
An auth-token based system that controls what logs the user may view based on:
- The user's installation identifier (a uuid generated by the MADAssistant app once per installation)
- An optional start and end time
- The logs accessible to the user (with fine-grained regex-based filters)</br>
This information is encrypted using a passphrase which needs to provided to this library on runtime, to decrypt.</br>
All filtering is performed within the client library and then sent to the MADAssistant app

<img width="200" alt="portfolio_view" src="https://user-images.githubusercontent.com/3502209/123684638-5723db00-d86b-11eb-818e-5b39c1640bd7.png"> <img width="200" alt="portfolio_view" src="https://user-images.githubusercontent.com/3502209/123684642-58ed9e80-d86b-11eb-9393-f817ce6ad96f.png"></br>

NOTE: These logs are not uploaded to any server and will remain only on the user's device until they share it.


## Integration into your application
- Add the jitpack repository to project build.gradle
  ```
  allprojects {
	repositories {
		...
		maven { url 'https://jitpack.io' }
	}
  }
  ```
- Add the library as a dependency
  ```
  implementation 'com.github.Evdayapps.MADAssistant-Library:madassistant-clientlib:0.0.7'
  // This is required to utilise an OkHttp Interceptor that will log network calls
  implementation 'com.github.Evdayapps.MADAssistant-Library:madassistant-adapter-okhttp3-3:0.0.7'
  ```
- Create an instance of MADAssistantClient
  ```
  val client = MADAssistantClientImpl(
    applicationContext = context,
    passphrase = "<your passphrase here>",
    logUtils = object : com.evdayapps.madassistant.clientlib.utils.LogUtils {
        // This is optional. Use it if you wish to view logs from the library
	override fun d(tag: String, message: String) = Log.d(tag, message)
	override fun e(throwable: Throwable) = throwable.printStackTrace()
	override fun i(tag: String, message: String) = Log.i(tag, message)
    }
  )
  ```
- Initialise the client
  ```
  client.bindToService()
  ```
- Log events using the appropriate method
  ```
  // For Exceptions
  fun logException(throwable: Throwable)
  
  // For Analytics
  fun logAnalyticsEvent(destination: String, eventName: String, data: Map<String, Any?>)
  
  // For logs that match android.util.Log
  fun logGenericLog(type: Int, tag: String, message: String, data: Map<String, Any?>?)

  // For network logs. Alternately [MADAssistantOkHttp3Interceptor] can be used for okhttp setups
  fun logNetworkCall(data: NetworkCallLogModel)
  ```
- Logging Crashes
  ```
  client.logCrashes()
  ```
  Alternately, crashes can be logged manually too using:
  ```
  client.logCrashReport(throwable: Throwable)
  ```
 










